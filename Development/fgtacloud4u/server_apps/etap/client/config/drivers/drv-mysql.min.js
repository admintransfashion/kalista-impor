'use strict';var _0x3ec3=['`\x20>=\x20\x27','assign','hasOwnProperty','\x0a\x09\x09\x09SELECT\x0a\x09\x09\x09','Field','done.\x0d\x0a','`\x20=\x20:tx_id\x0a\x09\x09\x09','\x0a\x09\x09\x09\x09SELECT\x0a\x09\x09\x09\x09\x09`','`)\x20as\x20item_subtotal,\x0a\x09\x09\x09\x09\x09${neg}(`','111025hUeAtX','191284xmOPaJ','itemsubtotal','config','database\x20is\x20not\x20connnected.\x0d\x0a','items','log','2395hruAoD','tx_id','2gAktCb','Connected.\x0d\x0a','header','bind','`)\x20as\x20item_qty,\x0a\x09\x09\x09\x09\x09${neg}(`','itemname','limit','conf','server','startsWith','DESCRIBE\x20`','`\x20as\x20item_id,\x0a\x09\x09\x09\x09\x09`','exports','`\x20as\x20tx_id,\x0a\x09\x09\x09`','\x0a\x09\x09\x09\x09SELECT\x20\x0a\x09\x09\x09\x09\x09`','13xyRRms','replace','txisvoid','\x0a\x09\x09\x09\x09SELECT\x0a\x09\x09\x09\x09\x09\x27\x27\x20as\x20payment_id,\x20\x0a\x09\x09\x09\x09\x09\x27\x27\x20as\x20payment_method,\x0a\x09\x09\x09\x09\x09${neg}(SUM(`','connecting\x20to\x20mysql\x20database\x20...','`\x20as\x20tx_date\x0a\x09\x09FROM\x20\x0a\x09\x09\x09`','SHOW\x20TABLES','tablename','itemqty','\x27\x20as\x20site_id,\x0a\x09\x09\x09`','`\x20as\x20tx_void\x0a\x09\x09FROM\x20\x0a\x09\x09\x09`','42yglOyu','\x0a\x09\x09\x09FROM\x0a\x09\x09\x09','../src/drivers.js','host','table_id','\x27\x0a\x09\x09ORDER\x20BY\x20`','model','txservicecharge','itemtax','tenant_id','`\x0a\x09\x09WHERE\x0a\x09\x09\x09`','\x0a\x09\x09SELECT\x20\x0a\x09\x09DISTINCT\x0a\x09\x09\x09\x20\x27','`\x20as\x20payment_id,\x20\x0a\x09\x09\x09\x09\x09`','paymentname','fields','tx_void','destroy','`\x20as\x20tx_date,\x0a\x09\x09\x09`','payments','table_name','`\x20=\x20:tx_id\x0a\x09','conn','`\x20as\x20','515125eyJAnn','end','push','already\x20connnected\x0d\x0a','stdout','txid','32278TqBGpL','paymentvalue','write','closing\x20connection...\x20','`\x0a\x09\x09\x09\x09WHERE\x0a\x09\x09\x09\x09\x09`','escape','4709swcFtE','schema','lastfetchdate','--\x20DEBUG','txdate','`\x20\x20ASC\x09\x0a\x09','162795IJFpFj','_connected'];var _0xa79a=function(_0x3733e9,_0x61c4d2){_0x3733e9=_0x3733e9-0x14f;var _0x3ec3d1=_0x3ec3[_0x3733e9];return _0x3ec3d1;};var _0x155959=_0xa79a;(function(_0x55956c,_0x3a50b5){var _0x5791a2=_0xa79a;while(!![]){try{var _0x206e63=parseInt(_0x5791a2(0x14f))*-parseInt(_0x5791a2(0x183))+parseInt(_0x5791a2(0x167))*-parseInt(_0x5791a2(0x178))+parseInt(_0x5791a2(0x169))*-parseInt(_0x5791a2(0x160))+-parseInt(_0x5791a2(0x155))+parseInt(_0x5791a2(0x161))+parseInt(_0x5791a2(0x1a0))+parseInt(_0x5791a2(0x19a));if(_0x206e63===_0x3a50b5)break;else _0x55956c['push'](_0x55956c['shift']());}catch(_0x32f036){_0x55956c['push'](_0x55956c['shift']());}}}(_0x3ec3,0x1e801));const drivers=require(_0x155959(0x185)),mysql=require('mysql');module[_0x155959(0x175)]=_0x1c821e=>{var _0x751aee=_0x155959,_0x123697={'_connected':![],'config':_0x1c821e,'conn':{}};return Object[_0x751aee(0x158)](drivers['CreateInterface'](),{'connect':async()=>{await mysql_connect(_0x123697);},'close':async()=>{await mysql_close(_0x123697);},'setup_get_tables':async()=>{return await setup_get_tables(_0x123697);},'setup_get_fields':async _0x346e81=>{return await setup_get_fields(_0x123697,_0x346e81);},'previewtable':async _0x14ed66=>{return await previewtable(_0x123697,_0x14ed66);},'tx_get_latest_rows':async()=>{return await tx_get_latest_rows(_0x123697);},'tx_get_data':async _0x1b9ddb=>{return await tx_get_data(_0x123697,_0x1b9ddb);},'setConfig':_0x326273=>{var _0x539086=_0x751aee;_0x123697[_0x539086(0x170)]=_0x326273;}});};async function mysql_connect(_0xab6235){var _0x52caa3=_0x155959;if(_0xab6235[_0x52caa3(0x156)]){process[_0x52caa3(0x19e)][_0x52caa3(0x1a2)](_0x52caa3(0x19d));return;}var _0x152e8d=_0xab6235[_0x52caa3(0x163)][_0x52caa3(0x171)];return _0xab6235['conn']=mysql['createConnection']({'host':_0x152e8d[_0x52caa3(0x186)],'user':_0x152e8d['user'],'password':_0x152e8d['password'],'database':_0x152e8d['database'],'queryFormat':(_0x1e8092,_0x300f06)=>{var _0x270e6e=_0x52caa3;if(!_0x300f06)return _0x1e8092;var _0x2ac2bd=_0x1e8092[_0x270e6e(0x179)](/\:(\w+)/g,function(_0x181cb9,_0x8193db){var _0x75c4c8=_0x270e6e;if(_0x300f06[_0x75c4c8(0x159)](_0x8193db))return mysql[_0x75c4c8(0x1a5)](_0x300f06[_0x8193db]);return _0x181cb9;}[_0x270e6e(0x16c)](this));return _0x1e8092[_0x270e6e(0x172)](_0x270e6e(0x152))&&console[_0x270e6e(0x166)](_0x2ac2bd),_0x2ac2bd;}}),new Promise((_0x1dc8d8,_0x39bab4)=>{var _0x2524a2=_0x52caa3;process[_0x2524a2(0x19e)][_0x2524a2(0x1a2)](_0x2524a2(0x17c)),_0xab6235['conn']['connect'](_0x121a8d=>{var _0x4124c7=_0x2524a2;_0x121a8d?_0x39bab4(_0x121a8d):(_0xab6235['_connected']=!![],process[_0x4124c7(0x19e)]['write'](_0x4124c7(0x16a)),_0x1dc8d8(!![]));});});}async function setup_get_tables(_0x32f97f){var _0x3848b6=_0x155959;try{var _0x2db3f8=_0x3848b6(0x17e),_0x1f89de=await mysql_query(_0x32f97f,_0x2db3f8),_0x285d21=[];for(var _0x37ce4a of _0x1f89de){var _0x307f99={};for(var _0x8ba7ff in _0x37ce4a){_0x307f99[_0x3848b6(0x187)]=_0x37ce4a[_0x8ba7ff],_0x307f99[_0x3848b6(0x196)]=_0x37ce4a[_0x8ba7ff];break;}_0x285d21['push'](_0x307f99);}return _0x285d21;}catch(_0x3dc1b5){throw _0x3dc1b5;}}async function setup_get_fields(_0x5e9d72,_0x3ea87e){var _0xe8e603=_0x155959;try{var _0x2acace=_0xe8e603(0x173)+_0x3ea87e+'`',_0x48d1d2=await mysql_query(_0x5e9d72,_0x2acace),_0x32df91=[];for(var _0x3a2de4 of _0x48d1d2){var _0x3b16a9={'field_id':_0x3a2de4['Field'],'field_name':_0x3a2de4[_0xe8e603(0x15b)]};_0x32df91[_0xe8e603(0x19c)](_0x3b16a9);}return _0x32df91;}catch(_0x27bde9){throw _0x27bde9;}}async function tx_get_latest_rows(_0x5330dc){var _0x16f060=_0x155959,_0x46c384=_0x5330dc[_0x16f060(0x163)][_0x16f060(0x151)],_0x5a4128='\x0a\x09\x09SELECT\x20\x0a\x09\x09DISTINCT\x20\x0a\x09\x09\x09`'+_0x5330dc[_0x16f060(0x163)]['schema']['header'][_0x16f060(0x191)][_0x16f060(0x19f)]+_0x16f060(0x176)+_0x5330dc[_0x16f060(0x163)][_0x16f060(0x150)][_0x16f060(0x16b)][_0x16f060(0x191)][_0x16f060(0x153)]+_0x16f060(0x17d)+_0x5330dc[_0x16f060(0x163)][_0x16f060(0x150)][_0x16f060(0x16b)][_0x16f060(0x17f)]+_0x16f060(0x18d)+_0x5330dc[_0x16f060(0x163)]['schema']['header'][_0x16f060(0x191)][_0x16f060(0x153)]+_0x16f060(0x157)+_0x46c384+_0x16f060(0x188)+_0x5330dc['config'][_0x16f060(0x150)][_0x16f060(0x16b)][_0x16f060(0x191)]['txdate']+_0x16f060(0x154);try{var _0x22812e=await mysql_query(_0x5330dc,_0x5a4128);return _0x22812e;}catch(_0x39a427){console['error'](_0x39a427);throw _0x39a427;}}async function tx_get_data(_0x4c1f10,_0xd62bd7){try{var _0x5aa94c=await tx_get_data_header(_0x4c1f10,_0xd62bd7),_0x5c2bf5=await tx_get_data_items(_0x4c1f10,_0xd62bd7,_0x5aa94c),_0x1d84bb=await tx_get_data_payments(_0x4c1f10,_0xd62bd7,_0x5aa94c);return{'header':_0x5aa94c,'items':_0x5c2bf5,'payments':_0x1d84bb};}catch(_0x42dde6){throw _0x42dde6;}}async function tx_get_data_header(_0x3c25e6,_0x3c7e82){var _0x305e0d=_0x155959,_0xd358b5=_0x305e0d(0x18e)+_0x3c25e6[_0x305e0d(0x163)][_0x305e0d(0x18c)]+_0x305e0d(0x181)+_0x3c25e6[_0x305e0d(0x163)][_0x305e0d(0x150)][_0x305e0d(0x16b)][_0x305e0d(0x191)][_0x305e0d(0x19f)]+'`\x20as\x20tx_id,\x0a\x09\x09\x09`'+_0x3c25e6[_0x305e0d(0x163)][_0x305e0d(0x150)][_0x305e0d(0x16b)][_0x305e0d(0x191)][_0x305e0d(0x153)]+_0x305e0d(0x194)+_0x3c25e6[_0x305e0d(0x163)][_0x305e0d(0x150)]['header'][_0x305e0d(0x191)][_0x305e0d(0x18a)]+'`\x20as\x20tx_servicecharge,\x0a\x09\x09\x09`'+_0x3c25e6[_0x305e0d(0x163)][_0x305e0d(0x150)][_0x305e0d(0x16b)][_0x305e0d(0x191)][_0x305e0d(0x17a)]+_0x305e0d(0x182)+_0x3c25e6[_0x305e0d(0x163)][_0x305e0d(0x150)]['header'][_0x305e0d(0x17f)]+'`\x0a\x09\x09WHERE\x0a\x09\x09\x09`'+_0x3c25e6[_0x305e0d(0x163)][_0x305e0d(0x150)][_0x305e0d(0x16b)][_0x305e0d(0x191)][_0x305e0d(0x19f)]+_0x305e0d(0x197);try{var _0x535b88=await mysql_query(_0x3c25e6,_0xd358b5,{'tx_id':_0x3c7e82['tx_id']}),_0x30d638=_0x535b88[0x0];return _0x30d638;}catch(_0x44de30){throw _0x44de30;}}async function tx_get_data_items(_0x52d467,_0x138feb,_0x3ebd3d){var _0x3efa2a=_0x155959,_0x444424=_0x52d467[_0x3efa2a(0x163)][_0x3efa2a(0x150)][_0x3efa2a(0x189)];try{var _0x23f35f;_0x444424=='schema1'?_0x23f35f=_0x3efa2a(0x177)+_0x52d467[_0x3efa2a(0x163)][_0x3efa2a(0x150)]['header'][_0x3efa2a(0x191)]['itemname']+_0x3efa2a(0x174)+_0x52d467['config'][_0x3efa2a(0x150)][_0x3efa2a(0x16b)]['fields'][_0x3efa2a(0x16e)]+'`\x20as\x20item_name,\x0a\x09\x09\x09\x09\x09${neg}(`'+_0x52d467['config']['schema'][_0x3efa2a(0x16b)][_0x3efa2a(0x191)]['itemqty']+_0x3efa2a(0x16d)+_0x52d467[_0x3efa2a(0x163)]['schema']['header'][_0x3efa2a(0x191)]['itemsubtotal']+_0x3efa2a(0x15f)+_0x52d467[_0x3efa2a(0x163)][_0x3efa2a(0x150)][_0x3efa2a(0x16b)]['fields']['itemtax']+'`)\x20as\x20item_taxvalue\x09\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09`'+_0x52d467[_0x3efa2a(0x163)]['schema'][_0x3efa2a(0x16b)][_0x3efa2a(0x17f)]+_0x3efa2a(0x1a4)+_0x52d467['config'][_0x3efa2a(0x150)][_0x3efa2a(0x16b)][_0x3efa2a(0x191)][_0x3efa2a(0x19f)]+_0x3efa2a(0x15d):_0x23f35f='\x0a\x09\x09\x09\x09SELECT\x20\x0a\x09\x09\x09\x09\x09`'+_0x52d467[_0x3efa2a(0x163)][_0x3efa2a(0x150)][_0x3efa2a(0x165)][_0x3efa2a(0x191)][_0x3efa2a(0x16e)]+'`\x20as\x20item_id,\x0a\x09\x09\x09\x09\x09`'+_0x52d467[_0x3efa2a(0x163)][_0x3efa2a(0x150)][_0x3efa2a(0x165)][_0x3efa2a(0x191)]['itemname']+'`\x20as\x20item_name,\x0a\x09\x09\x09\x09\x09${neg}(`'+_0x52d467[_0x3efa2a(0x163)][_0x3efa2a(0x150)]['items']['fields'][_0x3efa2a(0x180)]+_0x3efa2a(0x16d)+_0x52d467[_0x3efa2a(0x163)][_0x3efa2a(0x150)][_0x3efa2a(0x165)][_0x3efa2a(0x191)][_0x3efa2a(0x162)]+_0x3efa2a(0x15f)+_0x52d467[_0x3efa2a(0x163)][_0x3efa2a(0x150)][_0x3efa2a(0x165)][_0x3efa2a(0x191)][_0x3efa2a(0x18b)]+'`)\x20as\x20item_taxvalue\x09\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09`'+_0x52d467['config'][_0x3efa2a(0x150)][_0x3efa2a(0x165)]['tablename']+_0x3efa2a(0x1a4)+_0x52d467[_0x3efa2a(0x163)]['schema'][_0x3efa2a(0x165)]['fields'][_0x3efa2a(0x19f)]+_0x3efa2a(0x15d);var _0x18e152;_0x3ebd3d[_0x3efa2a(0x192)]==0x1||_0x3ebd3d[_0x3efa2a(0x192)]==!![]?_0x18e152='-':_0x18e152='';var _0x1d988e=_0x23f35f[_0x3efa2a(0x179)](/\${neg}/g,_0x18e152),_0x59ccdd=await mysql_query(_0x52d467,_0x1d988e,{'tx_id':_0x138feb[_0x3efa2a(0x168)],'neg':'-'});return _0x59ccdd;}catch(_0x4141d6){throw _0x4141d6;}}async function tx_get_data_payments(_0x54f436,_0xc37798,_0x1403bb){var _0x542fb5=_0x155959,_0x5d0819=_0x54f436[_0x542fb5(0x163)][_0x542fb5(0x150)][_0x542fb5(0x189)];try{var _0x40edee;_0x5d0819=='schema1'?_0x40edee=_0x542fb5(0x17b)+_0x54f436[_0x542fb5(0x163)]['schema'][_0x542fb5(0x16b)]['fields'][_0x542fb5(0x162)]+'`))\x20as\x20payment_value\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09`'+_0x54f436[_0x542fb5(0x163)][_0x542fb5(0x150)][_0x542fb5(0x16b)][_0x542fb5(0x17f)]+_0x542fb5(0x1a4)+_0x54f436[_0x542fb5(0x163)][_0x542fb5(0x150)]['header']['fields'][_0x542fb5(0x19f)]+'`\x20=\x20:tx_id\x0a\x09\x09\x09\x09group\x20by\x20`'+_0x54f436[_0x542fb5(0x163)][_0x542fb5(0x150)][_0x542fb5(0x16b)][_0x542fb5(0x191)]['txid']+'`\x0a\x09\x09\x09':_0x40edee=_0x542fb5(0x15e)+_0x54f436[_0x542fb5(0x163)][_0x542fb5(0x150)][_0x542fb5(0x195)]['fields'][_0x542fb5(0x190)]+_0x542fb5(0x18f)+_0x54f436[_0x542fb5(0x163)][_0x542fb5(0x150)][_0x542fb5(0x195)]['fields'][_0x542fb5(0x190)]+'`\x20as\x20payment_method,\x0a\x09\x09\x09\x09\x09${neg}(`'+_0x54f436['config'][_0x542fb5(0x150)]['payments'][_0x542fb5(0x191)][_0x542fb5(0x1a1)]+'`)\x20as\x20payment_value\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09`'+_0x54f436[_0x542fb5(0x163)][_0x542fb5(0x150)]['payments'][_0x542fb5(0x17f)]+_0x542fb5(0x1a4)+_0x54f436['config'][_0x542fb5(0x150)]['payments']['fields'][_0x542fb5(0x19f)]+_0x542fb5(0x15d);var _0x17bc4f;_0x1403bb['tx_void']==0x1||_0x1403bb['tx_void']==!![]?_0x17bc4f='-':_0x17bc4f='';var _0x8fb9f5=_0x40edee[_0x542fb5(0x179)](/\${neg}/g,_0x17bc4f),_0x29dbc8=await mysql_query(_0x54f436,_0x8fb9f5,{'tx_id':_0xc37798[_0x542fb5(0x168)],'neg':'-'});return _0x29dbc8;}catch(_0x111737){throw _0x111737;}}async function previewtable(_0x417262,_0x481979){var _0x35f4f6=_0x155959;try{var _0x53432f=[];for(var _0x344a07 in _0x481979[_0x35f4f6(0x191)]){_0x53432f[_0x35f4f6(0x19c)]('`'+_0x481979[_0x35f4f6(0x191)][_0x344a07]+_0x35f4f6(0x199)+_0x344a07);}var _0x4e41ad=_0x53432f['join'](',\x20'),_0x3dc573=_0x35f4f6(0x15a)+_0x4e41ad+_0x35f4f6(0x184)+_0x481979[_0x35f4f6(0x17f)]+'\x0a\x09\x09\x09LIMIT\x20'+_0x481979[_0x35f4f6(0x16f)]+'\x0a\x09\x09',_0x495ada=await mysql_query(_0x417262,_0x3dc573);return _0x495ada;}catch(_0x42f195){throw _0x42f195;}}async function mysql_close(_0x467277){var _0x243d99=_0x155959;if(!_0x467277[_0x243d99(0x156)]){process[_0x243d99(0x19e)][_0x243d99(0x1a2)](_0x243d99(0x164));return;}return new Promise((_0x366be0,_0x5c67c6)=>{var _0x279129=_0x243d99;process[_0x279129(0x19e)][_0x279129(0x1a2)](_0x279129(0x1a3)),_0x467277['conn'][_0x279129(0x19b)](_0xd1ebdb=>{var _0x327539=_0x279129;_0xd1ebdb?_0x5c67c6(_0xd1ebdb):(process[_0x327539(0x19e)][_0x327539(0x1a2)](_0x327539(0x15c)),_0x467277[_0x327539(0x198)][_0x327539(0x193)](),_0x366be0(!![]));});});}async function mysql_query(_0x4ad62c,_0x5c6878,_0x37b974){var _0x535dd2=_0x155959;if(!_0x4ad62c[_0x535dd2(0x156)]){process[_0x535dd2(0x19e)][_0x535dd2(0x1a2)]('database\x20is\x20not\x20connnected.\x0d\x0a');return;}return new Promise((_0x2da31d,_0x5830cc)=>{_0x4ad62c['conn']['query'](_0x5c6878,_0x37b974,(_0x255243,_0x3fe99b,_0x46f32a)=>{var _0x47bb6f=_0xa79a;if(_0x255243)_0x5830cc(_0x255243);else{var _0x45c14b=[];for(var _0x2150aa of _0x3fe99b){var _0xb1e24f={};for(var _0x2245ce in _0x2150aa){_0xb1e24f[_0x2245ce]=_0x2150aa[_0x2245ce];}_0x45c14b[_0x47bb6f(0x19c)](_0xb1e24f);}_0x2da31d(_0x45c14b);}});});}