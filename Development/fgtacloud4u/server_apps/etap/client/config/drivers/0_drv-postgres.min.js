var _0x2cd3=['schema1',')\x20as\x20item_taxvalue\x09\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09','itemtax','conn','model','\x20as\x20tx_date,\x0a\x09\x09\x09','\x20as\x20tx_id,\x0a\x09\x09\x09','\x20as\x20tx_date\x0a\x09\x09FROM\x20\x0a\x09\x09\x09','table_name','database','rows','\x0a\x09\x09\x09FROM\x0a\x09\x09\x09','CreateInterface','port','tx_void','\x0a\x09\x09\x09\x09WHERE\x0a\x09\x09\x09\x09\x09','\x20as\x20item_name,\x0a\x09\x09\x09\x09\x09','\x27\x20as\x20site_id,\x0a\x09\x09\x09','table_id','\x20as\x20item_id,\x0a\x09\x09\x09\x09\x09','assign',')\x20as\x20item_subtotal,\x0a\x09\x09\x09\x09\x09','\x20=\x20$1\x0a\x09\x09\x09','postgres://','stdout','tenant_id','exports','))\x20as\x20payment_value\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09','conf','tablename','\x27\x0a\x09\x09\x09AND\x20table_name\x20\x20\x20=\x20\x27','password','\x20as\x20payment_id,\x20\x0a\x09\x09\x09\x09\x09','connecting\x20to\x20database\x20...','push','public','itemname','database\x20is\x20not\x20connnected.\x0d\x0a','(SUM(','\x0a\x09\x09\x09SELECT\x20column_name\x0a\x09\x09\x09FROM\x20information_schema.columns\x0a\x09\x09\x09WHERE\x20table_schema\x20=\x20\x27','\x0a\x09\x09\x09\x09SELECT\x0a\x09\x09\x09\x09\x09\x27\x27\x20as\x20payment_id,\x20\x0a\x09\x09\x09\x09\x09\x27\x27\x20as\x20payment_method,\x0a\x09\x09\x09\x09\x09','query','write','itemqty','txisvoid','connect','end','\x20as\x20','error','_connected','items','\x0a\x09\x09\x09SELECT\x20table_name\x0a\x09\x09\x09FROM\x20information_schema.tables\x0a\x09\x09\x09WHERE\x20table_schema=\x27','txdate','\x0a\x09\x09','\x20=\x20$1\x0a\x09\x09\x09\x09group\x20by\x20','user','tx_id','\x20=\x20$1\x0a\x09','payments','header','\x0a\x09\x09WHERE\x0a\x09\x09\x09','\x0a\x09\x09SELECT\x20\x0a\x09\x09DISTINCT\x20\x0a\x09\x09\x09','\x0a\x09\x09\x09\x09SELECT\x20\x0a\x09\x09\x09\x09\x09','host','\x0a\x09\x09\x09\x09SELECT\x0a\x09\x09\x09\x09\x09','../src/drivers.js','paymentvalue','fields','schema','lastfetchdate','itemsubtotal','\x20>=\x20\x27','Client','\x27\x0a\x09\x09ORDER\x20BY\x20',')\x20as\x20payment_value\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09','Connected.\x0d\x0a','\x20as\x20tx_void\x0a\x09\x09FROM\x20\x0a\x09\x09\x09','txid','\x0a\x09\x09\x09LIMIT\x20','config','join','\x20as\x20payment_method,\x0a\x09\x09\x09\x09\x09','server',')\x20as\x20item_qty,\x0a\x09\x09\x09\x09\x09'];(function(_0x2c6d2c,_0x973e00){var _0x2cd367=function(_0x45e580){while(--_0x45e580){_0x2c6d2c['push'](_0x2c6d2c['shift']());}};_0x2cd367(++_0x973e00);}(_0x2cd3,0x1c7));var _0x45e5=function(_0x2c6d2c,_0x973e00){_0x2c6d2c=_0x2c6d2c-0xe5;var _0x2cd367=_0x2cd3[_0x2c6d2c];return _0x2cd367;};var _0x8bfe2a=_0x45e5;'use strict';const drivers=require(_0x8bfe2a(0x103)),pg=require('pg');module[_0x8bfe2a(0x130)]=_0x1c5275=>{var _0x2a88d6=_0x8bfe2a,_0x22fb8e={'_connected':![],'config':_0x1c5275,'conn':{}};return Object[_0x2a88d6(0x12a)](drivers[_0x2a88d6(0x122)](),{'connect':async()=>{await pg_connect(_0x22fb8e);},'close':async()=>{await pg_close(_0x22fb8e);},'setup_get_tables':async()=>{return await setup_get_tables(_0x22fb8e);},'setup_get_fields':async _0x568656=>{return await setup_get_fields(_0x22fb8e,_0x568656);},'previewtable':async _0x185b8d=>{return await previewtable(_0x22fb8e,_0x185b8d);},'tx_get_latest_rows':async()=>{return await tx_get_latest_rows(_0x22fb8e);},'tx_get_data':async _0x3f977c=>{return await tx_get_data(_0x22fb8e,_0x3f977c);},'setConfig':_0x41cd7a=>{var _0x3fd5d0=_0x2a88d6;_0x22fb8e[_0x3fd5d0(0x132)]=_0x41cd7a;}});};async function pg_connect(_0x46a0f4){var _0x1e2d7c=_0x8bfe2a;if(_0x46a0f4[_0x1e2d7c(0xf3)]){process['stdout']['write']('already\x20connnected\x0d\x0a');return;}var _0x7dfc7=_0x46a0f4['config'][_0x1e2d7c(0x114)],_0x110d66;if(_0x7dfc7[_0x1e2d7c(0x123)]==''||_0x7dfc7[_0x1e2d7c(0x123)]=='0'||_0x7dfc7[_0x1e2d7c(0x123)]==0x0||_0x7dfc7[_0x1e2d7c(0x123)]==null)var _0x110d66=_0x1e2d7c(0x12d)+_0x7dfc7[_0x1e2d7c(0xf9)]+':'+_0x7dfc7[_0x1e2d7c(0x135)]+'@'+_0x7dfc7[_0x1e2d7c(0x101)]+'/'+_0x7dfc7['database'];else var _0x110d66=_0x1e2d7c(0x12d)+_0x7dfc7[_0x1e2d7c(0xf9)]+':'+_0x7dfc7['password']+'@'+_0x7dfc7[_0x1e2d7c(0x101)]+':'+_0x7dfc7[_0x1e2d7c(0x123)]+'/'+_0x7dfc7[_0x1e2d7c(0x11f)];return _0x46a0f4['conn']=new pg[(_0x1e2d7c(0x10a))](_0x110d66),new Promise((_0x21a186,_0x47c716)=>{var _0x4a1692=_0x1e2d7c;process[_0x4a1692(0x12e)][_0x4a1692(0xec)](_0x4a1692(0x137)),_0x46a0f4[_0x4a1692(0x119)][_0x4a1692(0xef)](_0x19128e=>{var _0x491819=_0x4a1692;_0x19128e?_0x47c716(_0x19128e):(_0x46a0f4[_0x491819(0xf3)]=!![],process[_0x491819(0x12e)][_0x491819(0xec)](_0x491819(0x10d)),_0x21a186(!![]));});});}async function pg_close(_0x343ae7){var _0x320590=_0x8bfe2a;if(!_0x343ae7[_0x320590(0xf3)]){process['stdout'][_0x320590(0xec)](_0x320590(0xe7));return;}return new Promise((_0x1fe5f5,_0x3585a5)=>{var _0x4d9b57=_0x320590;process[_0x4d9b57(0x12e)][_0x4d9b57(0xec)]('closing\x20connection...\x20'),_0x343ae7[_0x4d9b57(0x119)][_0x4d9b57(0xf0)](_0x2afa63=>{var _0x3026cf=_0x4d9b57;_0x2afa63?_0x3585a5(_0x2afa63):(process['stdout'][_0x3026cf(0xec)]('done.\x0d\x0a'),_0x343ae7['conn'][_0x3026cf(0xf0)](),_0x1fe5f5(!![]));});});}async function pg_query(_0x33c952,_0x1bf79c,_0x195df1){var _0x51cf06=_0x8bfe2a;if(!_0x33c952[_0x51cf06(0xf3)]){process[_0x51cf06(0x12e)][_0x51cf06(0xec)](_0x51cf06(0xe7));return;}return new Promise((_0x595a4c,_0x49f008)=>{var _0x1ebd9d=_0x51cf06;_0x33c952[_0x1ebd9d(0x119)][_0x1ebd9d(0xeb)](_0x1bf79c,_0x195df1,(_0x32a9d2,_0x330bed)=>{var _0x269ac3=_0x1ebd9d;if(_0x32a9d2)_0x49f008(_0x32a9d2);else{var _0x180f7f=[];for(var _0x50e85c of _0x330bed[_0x269ac3(0x120)]){var _0x543a23={};for(var _0x586568 in _0x50e85c){_0x543a23[_0x586568]=_0x50e85c[_0x586568];}_0x180f7f[_0x269ac3(0x138)](_0x543a23);}_0x595a4c(_0x180f7f);}});});}async function setup_get_tables(_0x1bea62){var _0x22dca7=_0x8bfe2a;try{var _0x5a2338=_0x1bea62[_0x22dca7(0x111)][_0x22dca7(0x114)][_0x22dca7(0x106)]!=''?_0x1bea62[_0x22dca7(0x111)]['server'][_0x22dca7(0x106)]:'public',_0x8411d5=_0x22dca7(0xf5)+_0x5a2338+'\x27\x0a\x09\x09\x09ORDER\x20BY\x20table_name\x09\x09\x0a\x09\x09',_0x4a1aaa=await pg_query(_0x1bea62,_0x8411d5,[]),_0xf68636=[];for(var _0x753ea of _0x4a1aaa){var _0x48ce8c={};for(var _0x2422c0 in _0x753ea){_0x48ce8c[_0x22dca7(0x128)]=_0x753ea[_0x2422c0],_0x48ce8c[_0x22dca7(0x11e)]=_0x753ea[_0x2422c0];break;}_0xf68636[_0x22dca7(0x138)](_0x48ce8c);}return _0xf68636;}catch(_0x4200ed){throw _0x4200ed;}}async function setup_get_fields(_0x3167cb,_0x2b36b5){var _0x5c6acd=_0x8bfe2a;try{var _0x5ca7a2=_0x3167cb[_0x5c6acd(0x111)][_0x5c6acd(0x114)]['schema']!=''?_0x3167cb[_0x5c6acd(0x111)][_0x5c6acd(0x114)][_0x5c6acd(0x106)]:_0x5c6acd(0xe5),_0x5d0114=_0x5c6acd(0xe9)+_0x5ca7a2+_0x5c6acd(0x134)+_0x2b36b5+'\x27\x0a\x09\x09\x09ORDER\x20BY\x20column_name\x20\x20\x0a\x09\x09',_0x4651df=await pg_query(_0x3167cb,_0x5d0114,[]),_0x2972fa=[];for(var _0x1ee11f of _0x4651df){var _0x34bc20={};for(var _0x5a5718 in _0x1ee11f){_0x34bc20['field_id']=_0x1ee11f[_0x5a5718],_0x34bc20['field_name']=_0x1ee11f[_0x5a5718];break;}_0x2972fa[_0x5c6acd(0x138)](_0x34bc20);}return _0x2972fa;}catch(_0x45975a){throw _0x45975a;}}async function tx_get_latest_rows(_0x19d0f4){var _0x5c3fdb=_0x8bfe2a,_0x44aee8=_0x19d0f4[_0x5c3fdb(0x111)][_0x5c3fdb(0x107)],_0xdc87e1=_0x5c3fdb(0xff)+_0x19d0f4[_0x5c3fdb(0x111)][_0x5c3fdb(0x106)]['header'][_0x5c3fdb(0x105)][_0x5c3fdb(0x10f)]+_0x5c3fdb(0x11c)+_0x19d0f4[_0x5c3fdb(0x111)][_0x5c3fdb(0x106)][_0x5c3fdb(0xfd)][_0x5c3fdb(0x105)][_0x5c3fdb(0xf6)]+_0x5c3fdb(0x11d)+_0x19d0f4[_0x5c3fdb(0x111)][_0x5c3fdb(0x106)]['header'][_0x5c3fdb(0x133)]+_0x5c3fdb(0xfe)+_0x19d0f4['config'][_0x5c3fdb(0x106)][_0x5c3fdb(0xfd)][_0x5c3fdb(0x105)]['txdate']+_0x5c3fdb(0x109)+_0x44aee8+_0x5c3fdb(0x10b)+_0x19d0f4[_0x5c3fdb(0x111)][_0x5c3fdb(0x106)]['header'][_0x5c3fdb(0x105)][_0x5c3fdb(0xf6)]+'\x20\x20ASC\x09\x0a\x09';try{var _0x11cdb3=await pg_query(_0x19d0f4,_0xdc87e1);return _0x11cdb3;}catch(_0x217d8b){console[_0x5c3fdb(0xf2)](_0x217d8b);throw _0x217d8b;}}async function tx_get_data(_0x353b02,_0x2bbcd8){try{var _0x120c4e=await tx_get_data_header(_0x353b02,_0x2bbcd8),_0x5e9651=await tx_get_data_items(_0x353b02,_0x2bbcd8,_0x120c4e),_0xbce54e=await tx_get_data_payments(_0x353b02,_0x2bbcd8,_0x120c4e);return{'header':_0x120c4e,'items':_0x5e9651,'payments':_0xbce54e};}catch(_0x17479e){throw _0x17479e;}}async function tx_get_data_header(_0xbb64af,_0x43a335){var _0x3f94bb=_0x8bfe2a,_0x3f92f1='\x0a\x09\x09SELECT\x20\x0a\x09\x09DISTINCT\x0a\x09\x09\x09\x27'+_0xbb64af['config'][_0x3f94bb(0x12f)]+_0x3f94bb(0x127)+_0xbb64af[_0x3f94bb(0x111)][_0x3f94bb(0x106)][_0x3f94bb(0xfd)][_0x3f94bb(0x105)][_0x3f94bb(0x10f)]+_0x3f94bb(0x11c)+_0xbb64af['config'][_0x3f94bb(0x106)]['header'][_0x3f94bb(0x105)][_0x3f94bb(0xf6)]+_0x3f94bb(0x11b)+_0xbb64af[_0x3f94bb(0x111)]['schema'][_0x3f94bb(0xfd)][_0x3f94bb(0x105)][_0x3f94bb(0xee)]+_0x3f94bb(0x10e)+_0xbb64af['config'][_0x3f94bb(0x106)][_0x3f94bb(0xfd)]['tablename']+_0x3f94bb(0xfe)+_0xbb64af['config']['schema']['header'][_0x3f94bb(0x105)]['txid']+_0x3f94bb(0xfb);try{var _0x3b7f31=await pg_query(_0xbb64af,_0x3f92f1,[_0x43a335[_0x3f94bb(0xfa)]]),_0x18a18c=_0x3b7f31[0x0];return _0x18a18c;}catch(_0x18af84){throw _0x18af84;}}async function tx_get_data_items(_0xbb7ca3,_0x52031e,_0x40d470){var _0xe0f96e=_0x8bfe2a,_0x152b4d=_0xbb7ca3[_0xe0f96e(0x111)][_0xe0f96e(0x106)]['model'];try{var _0x506574;_0x40d470['tx_void']==0x1||_0x40d470[_0xe0f96e(0x124)]==!![]?_0x506574='-':_0x506574='';var _0x53d6d7;_0x152b4d==_0xe0f96e(0x116)?_0x53d6d7=_0xe0f96e(0x100)+_0xbb7ca3[_0xe0f96e(0x111)][_0xe0f96e(0x106)]['header'][_0xe0f96e(0x105)]['itemname']+'\x20as\x20item_id,\x0a\x09\x09\x09\x09\x09'+_0xbb7ca3[_0xe0f96e(0x111)]['schema'][_0xe0f96e(0xfd)]['fields'][_0xe0f96e(0xe6)]+_0xe0f96e(0x126)+_0x506574+'('+_0xbb7ca3['config'][_0xe0f96e(0x106)]['header']['fields'][_0xe0f96e(0xed)]+_0xe0f96e(0x115)+_0x506574+'('+_0xbb7ca3['config']['schema'][_0xe0f96e(0xfd)][_0xe0f96e(0x105)][_0xe0f96e(0x108)]+_0xe0f96e(0x12b)+_0x506574+'('+_0xbb7ca3['config']['schema'][_0xe0f96e(0xfd)][_0xe0f96e(0x105)][_0xe0f96e(0x118)]+_0xe0f96e(0x117)+_0xbb7ca3['config'][_0xe0f96e(0x106)][_0xe0f96e(0xfd)][_0xe0f96e(0x133)]+_0xe0f96e(0x125)+_0xbb7ca3[_0xe0f96e(0x111)]['schema'][_0xe0f96e(0xfd)][_0xe0f96e(0x105)][_0xe0f96e(0x10f)]+_0xe0f96e(0x12c):_0x53d6d7=_0xe0f96e(0x100)+_0xbb7ca3[_0xe0f96e(0x111)][_0xe0f96e(0x106)][_0xe0f96e(0xf4)][_0xe0f96e(0x105)][_0xe0f96e(0xe6)]+_0xe0f96e(0x129)+_0xbb7ca3[_0xe0f96e(0x111)][_0xe0f96e(0x106)]['items'][_0xe0f96e(0x105)][_0xe0f96e(0xe6)]+_0xe0f96e(0x126)+_0x506574+'('+_0xbb7ca3['config']['schema']['items'][_0xe0f96e(0x105)][_0xe0f96e(0xed)]+_0xe0f96e(0x115)+_0x506574+'('+_0xbb7ca3['config'][_0xe0f96e(0x106)]['items'][_0xe0f96e(0x105)][_0xe0f96e(0x108)]+')\x20as\x20item_subtotal,\x0a\x09\x09\x09\x09\x09'+_0x506574+'('+_0xbb7ca3['config'][_0xe0f96e(0x106)]['items'][_0xe0f96e(0x105)][_0xe0f96e(0x118)]+_0xe0f96e(0x117)+_0xbb7ca3[_0xe0f96e(0x111)][_0xe0f96e(0x106)][_0xe0f96e(0xf4)][_0xe0f96e(0x133)]+'\x0a\x09\x09\x09\x09WHERE\x0a\x09\x09\x09\x09\x09'+_0xbb7ca3[_0xe0f96e(0x111)][_0xe0f96e(0x106)][_0xe0f96e(0xf4)]['fields'][_0xe0f96e(0x10f)]+_0xe0f96e(0x12c);var _0x47e814=_0x53d6d7,_0x569e2e=await pg_query(_0xbb7ca3,_0x47e814,[_0x52031e[_0xe0f96e(0xfa)]]);return _0x569e2e;}catch(_0x18ada1){throw _0x18ada1;}}async function tx_get_data_payments(_0x260622,_0x21b3bf,_0x4a72f3){var _0x521004=_0x8bfe2a,_0xbea975=_0x260622[_0x521004(0x111)][_0x521004(0x106)][_0x521004(0x11a)];try{var _0x4eb002;_0x4a72f3[_0x521004(0x124)]==0x1||_0x4a72f3[_0x521004(0x124)]==!![]?_0x4eb002='-':_0x4eb002='';var _0x256cce;_0xbea975==_0x521004(0x116)?_0x256cce=_0x521004(0xea)+_0x4eb002+_0x521004(0xe8)+_0x260622['config'][_0x521004(0x106)]['header'][_0x521004(0x105)][_0x521004(0x108)]+_0x521004(0x131)+_0x260622[_0x521004(0x111)][_0x521004(0x106)][_0x521004(0xfd)][_0x521004(0x133)]+_0x521004(0x125)+_0x260622[_0x521004(0x111)]['schema'][_0x521004(0xfd)][_0x521004(0x105)][_0x521004(0x10f)]+_0x521004(0xf8)+_0x260622['config'][_0x521004(0x106)]['header'][_0x521004(0x105)][_0x521004(0x10f)]+'\x0a\x09\x09\x09':_0x256cce=_0x521004(0x102)+_0x260622['config'][_0x521004(0x106)][_0x521004(0xfc)]['fields']['paymentname']+_0x521004(0x136)+_0x260622[_0x521004(0x111)]['schema'][_0x521004(0xfc)]['fields']['paymentname']+_0x521004(0x113)+_0x4eb002+'('+_0x260622[_0x521004(0x111)]['schema'][_0x521004(0xfc)][_0x521004(0x105)][_0x521004(0x104)]+_0x521004(0x10c)+_0x260622[_0x521004(0x111)][_0x521004(0x106)]['payments'][_0x521004(0x133)]+_0x521004(0x125)+_0x260622['config'][_0x521004(0x106)][_0x521004(0xfc)][_0x521004(0x105)]['txid']+_0x521004(0x12c);var _0x2f6287=_0x256cce,_0x3445ec=await pg_query(_0x260622,_0x2f6287,[_0x21b3bf['tx_id']]);return _0x3445ec;}catch(_0x5781fc){throw _0x5781fc;}}async function previewtable(_0xc01466,_0x1983d9){var _0x46015e=_0x8bfe2a;try{var _0x12079b=[];for(var _0xb7f940 in _0x1983d9[_0x46015e(0x105)]){_0x12079b['push'](_0x1983d9[_0x46015e(0x105)][_0xb7f940]+_0x46015e(0xf1)+_0xb7f940);}var _0x239347=_0x12079b[_0x46015e(0x112)](',\x20'),_0x22e74b='\x0a\x09\x09\x09SELECT\x0a\x09\x09\x09'+_0x239347+_0x46015e(0x121)+_0x1983d9['tablename']+_0x46015e(0x110)+_0x1983d9['limit']+_0x46015e(0xf7),_0x377d1a=await pg_query(_0xc01466,_0x22e74b,[]);return _0x377d1a;}catch(_0x2b5c7d){throw _0x2b5c7d;}}