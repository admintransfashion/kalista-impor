'use strict';var _0x45a9=['\x27\x0a\x09\x09\x09\x09group\x20by\x20','txdate','\x0a\x09\x09\x09\x09WHERE\x0a\x09\x09\x09\x09\x09','write','model','441951IdpIjN','\x20as\x20tx_date,\x0a\x09\x09\x09','txservicecharge','payments','txid','database\x20is\x20not\x20connnected.\x0d\x0a','table_name','1179145UuJarG','connect','mssql','5bnNDBV','\x0a\x09\x09\x09SELECT\x0a\x09\x09\x09TOP\x20','header','close','../src/drivers.js','recordset','Connected.\x0d\x0a','12cwxjej','user','schema','conn','conf','\x20as\x20tx_void\x0a\x09\x09FROM\x20\x0a\x09\x09\x09','join','log','error','fields','lastfetchdate','Cannot\x20Connect\x20to\x20database.\x0d\x0a','\x0a\x09\x09SELECT\x20\x0a\x09\x09DISTINCT\x20\x0a\x09\x09\x09','itemtax','tx_void','\x0a\x09\x09\x09SELECT\x20\x0a\x09\x09\x09[COLUMN_NAME]\x0a\x09\x09\x09FROM\x20\x0a\x09\x09\x09INFORMATION_SCHEMA.COLUMNS\x20\x0a\x09\x09\x09WHERE\x20\x0a\x09\x09\x09[TABLE_NAME]=\x27','already\x20connnected\x0d\x0a','\x20\x20ASC\x09\x0a\x09','txisvoid','\x0a\x09\x09\x09SELECT\x20\x0a\x09\x09\x09TABLE_NAME\x20\x0a\x09\x09\x09FROM\x20\x0a\x09\x09\x09INFORMATION_SCHEMA.TABLES\x20\x0a\x09\x09\x09WHERE\x20TABLE_TYPE=\x27BASE\x20TABLE\x27\x20\x0a\x09\x09\x09ORDER\x20BY\x20TABLE_NAME\x09\x0a\x09\x09','158038gVQiqZ',')\x20as\x20payment_value\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09','\x0a\x09\x09\x09\x09SELECT\x20\x0a\x09\x09\x09\x09\x09','\x27\x0a\x09\x09ORDER\x20BY\x20','server','CreateInterface','\x20=\x20\x27','\x20as\x20item_id,\x0a\x09\x09\x09\x09\x09','tx_id','mssql://','items','push','field_id','\x20as\x20payment_method,\x0a\x09\x09\x09\x09\x09',')\x20as\x20item_taxvalue\x09\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09',')\x20as\x20item_qty,\x0a\x09\x09\x09\x09\x09','itemsubtotal','5361yYJbtf','847437wjnyTw','\x0a\x09\x09WHERE\x0a\x09\x09\x09','\x27\x20as\x20site_id,\x0a\x09\x09\x09','\x20as\x20','\x0a\x09\x09\x09\x09SELECT\x0a\x09\x09\x09\x09\x09\x27\x27\x20as\x20payment_id,\x20\x0a\x09\x09\x09\x09\x09\x27\x27\x20as\x20payment_method,\x0a\x09\x09\x09\x09\x09','(SUM(','stdout','\x20as\x20tx_id,\x0a\x09\x09\x09','paymentname','1394713viUkdT','))\x20as\x20payment_value\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09','145724ytpNzc','assign','\x20as\x20item_name,\x0a\x09\x09\x09\x09\x09','exports','host','query',')\x20as\x20item_subtotal,\x0a\x09\x09\x09\x09\x09','field_name','\x20as\x20tx_date\x0a\x09\x09FROM\x20\x0a\x09\x09\x09','\x27\x20\x0a\x09\x09\x09ORDER\x20BY\x20[COLUMN_NAME]\x0a\x09\x09','port','_connected','itemname','\x27\x0a\x09','password','tablename','schema1','config','\x27\x0a\x09\x09\x09','itemqty','paymentvalue','closing\x20connection...\x20','database'];var _0x5c4e=function(_0x138db7,_0x57019){_0x138db7=_0x138db7-0xec;var _0x45a9be=_0x45a9[_0x138db7];return _0x45a9be;};var _0x28028b=_0x5c4e;(function(_0x5451c4,_0x378f8c){var _0x56d0e8=_0x5c4e;while(!![]){try{var _0x5746b1=parseInt(_0x56d0e8(0xfb))+-parseInt(_0x56d0e8(0x129))+parseInt(_0x56d0e8(0x122))+-parseInt(_0x56d0e8(0x133))*parseInt(_0x56d0e8(0xfa))+-parseInt(_0x56d0e8(0x147))*parseInt(_0x56d0e8(0x12c))+parseInt(_0x56d0e8(0x104))+parseInt(_0x56d0e8(0x106));if(_0x5746b1===_0x378f8c)break;else _0x5451c4['push'](_0x5451c4['shift']());}catch(_0x3e6de3){_0x5451c4['push'](_0x5451c4['shift']());}}}(_0x45a9,0xc25fe));const drivers=require(_0x28028b(0x130)),mssql=require(_0x28028b(0x12b));module[_0x28028b(0x109)]=_0xdd5bee=>{var _0x21b601=_0x28028b,_0xb5645a={'_connected':![],'config':_0xdd5bee,'conn':{}};return Object[_0x21b601(0x107)](drivers[_0x21b601(0xee)](),{'connect':async()=>{await mssql_connect(_0xb5645a);},'close':async()=>{await mssql_close(_0xb5645a);},'setup_get_tables':async()=>{return await setup_get_tables(_0xb5645a);},'setup_get_fields':async _0x25fcdf=>{return await setup_get_fields(_0xb5645a,_0x25fcdf);},'previewtable':async _0x1d7b86=>{return await previewtable(_0xb5645a,_0x1d7b86);},'tx_get_latest_rows':async()=>{return await tx_get_latest_rows(_0xb5645a);},'tx_get_data':async _0x5b904d=>{return await tx_get_data(_0xb5645a,_0x5b904d);},'setConfig':_0x3a73cb=>{var _0x5473b4=_0x21b601;_0xb5645a[_0x5473b4(0x137)]=_0x3a73cb;}});};async function mssql_connect(_0x84859e){var _0x108aa5=_0x28028b;if(_0x84859e[_0x108aa5(0x111)]){process[_0x108aa5(0x101)]['write'](_0x108aa5(0x143));return;}var _0x26ae66=_0x84859e[_0x108aa5(0x117)][_0x108aa5(0xed)],_0x5498a4;if(_0x26ae66[_0x108aa5(0x110)]==''||_0x26ae66[_0x108aa5(0x110)]=='0'||_0x26ae66[_0x108aa5(0x110)]==0x0||_0x26ae66['port']==null)var _0x5498a4=_0x108aa5(0xf2)+_0x26ae66['user']+':'+_0x26ae66['password']+'@'+_0x26ae66['host']+'/'+_0x26ae66['database'];else var _0x5498a4=_0x108aa5(0xf2)+_0x26ae66[_0x108aa5(0x134)]+':'+_0x26ae66[_0x108aa5(0x114)]+'@'+_0x26ae66[_0x108aa5(0x10a)]+':'+_0x26ae66[_0x108aa5(0x110)]+'/'+_0x26ae66[_0x108aa5(0x11c)];try{return process['stdout'][_0x108aa5(0x120)]('connecting\x20to\x20database\x20...'),await mssql[_0x108aa5(0x12a)](_0x5498a4),_0x84859e[_0x108aa5(0x111)]=!![],process[_0x108aa5(0x101)]['write'](_0x108aa5(0x132)),_0x84859e[_0x108aa5(0x136)]=mssql,!![];}catch(_0x155def){process[_0x108aa5(0x101)]['write'](_0x108aa5(0x13e)),console[_0x108aa5(0x13a)](_0x155def);throw _0x155def;}}async function mssql_close(_0x293c){var _0x4afe06=_0x28028b;if(!_0x293c[_0x4afe06(0x111)]){process[_0x4afe06(0x101)]['write'](_0x4afe06(0x127));return;}try{process['stdout'][_0x4afe06(0x120)](_0x4afe06(0x11b)),_0x293c['conn'][_0x4afe06(0x12f)](),process[_0x4afe06(0x101)][_0x4afe06(0x120)]('done.\x0d\x0a');}catch(_0x252569){throw _0x252569;}}async function mssql_query(_0x5eddd7,_0x4e0b37){var _0x48e5c0=_0x28028b;if(!_0x5eddd7[_0x48e5c0(0x111)]){process['stdout'][_0x48e5c0(0x120)](_0x48e5c0(0x127));return;}try{var _0xf3667=await _0x5eddd7[_0x48e5c0(0x136)][_0x48e5c0(0x10b)](_0x4e0b37),_0x41d21b=[];for(var _0xd43930 of _0xf3667[_0x48e5c0(0x131)]){var _0x4ea919={};for(var _0x34c048 in _0xd43930){_0x4ea919[_0x34c048]=_0xd43930[_0x34c048];}_0x41d21b['push'](_0x4ea919);}return _0x41d21b;}catch(_0x316853){throw _0x316853;}}async function setup_get_tables(_0x52062a){var _0x4e0ecf=_0x28028b;try{var _0x3292ca=_0x4e0ecf(0x146),_0x9da2f=await mssql_query(_0x52062a,_0x3292ca,[]),_0x871781=[];for(var _0x19f219 of _0x9da2f){var _0x16efa7={};for(var _0x2fe249 in _0x19f219){_0x16efa7['table_id']=_0x19f219[_0x2fe249],_0x16efa7[_0x4e0ecf(0x128)]=_0x19f219[_0x2fe249];break;}_0x871781[_0x4e0ecf(0xf4)](_0x16efa7);}return _0x871781;}catch(_0x3844ac){throw _0x3844ac;}}async function setup_get_fields(_0x4ddbd6,_0x229b83){var _0x12ec82=_0x28028b;try{var _0x3d9526=_0x12ec82(0x142)+_0x229b83+_0x12ec82(0x10f),_0x3308a8=await mssql_query(_0x4ddbd6,_0x3d9526,[]),_0x43ab08=[];for(var _0x26b47f of _0x3308a8){var _0x486715={};for(var _0x3e3a9f in _0x26b47f){_0x486715[_0x12ec82(0xf5)]=_0x26b47f[_0x3e3a9f],_0x486715[_0x12ec82(0x10d)]=_0x26b47f[_0x3e3a9f];break;}_0x43ab08['push'](_0x486715);}return _0x43ab08;}catch(_0x302cf7){throw _0x302cf7;}}async function tx_get_latest_rows(_0x17d98c){var _0x767402=_0x28028b,_0x5df793=_0x17d98c[_0x767402(0x117)][_0x767402(0x13d)],_0x201965=_0x767402(0x13f)+_0x17d98c[_0x767402(0x117)][_0x767402(0x135)][_0x767402(0x12e)][_0x767402(0x13c)]['txid']+_0x767402(0x102)+_0x17d98c[_0x767402(0x117)][_0x767402(0x135)]['header']['fields'][_0x767402(0x11e)]+_0x767402(0x10e)+_0x17d98c[_0x767402(0x117)][_0x767402(0x135)][_0x767402(0x12e)][_0x767402(0x115)]+'\x0a\x09\x09WHERE\x0a\x09\x09\x09'+_0x17d98c[_0x767402(0x117)][_0x767402(0x135)]['header'][_0x767402(0x13c)]['txdate']+'\x20>=\x20\x27'+_0x5df793+_0x767402(0xec)+_0x17d98c[_0x767402(0x117)]['schema']['header'][_0x767402(0x13c)][_0x767402(0x11e)]+_0x767402(0x144);try{var _0x2947df=await mssql_query(_0x17d98c,_0x201965);return _0x2947df;}catch(_0x45c09a){console[_0x767402(0x13b)](_0x45c09a);throw _0x45c09a;}}async function tx_get_data(_0x565fbf,_0x1bef2){try{var _0x38456e=await tx_get_data_header(_0x565fbf,_0x1bef2),_0x1673fd=await tx_get_data_items(_0x565fbf,_0x1bef2,_0x38456e),_0x2fcca7=await tx_get_data_payments(_0x565fbf,_0x1bef2,_0x38456e);return{'header':_0x38456e,'items':_0x1673fd,'payments':_0x2fcca7};}catch(_0x145636){throw _0x145636;}}async function tx_get_data_header(_0x3a87da,_0x5e9ff0){var _0x1f1024=_0x28028b,_0xa90d94='\x0a\x09\x09SELECT\x20\x0a\x09\x09DISTINCT\x0a\x09\x09\x09\x27'+_0x3a87da[_0x1f1024(0x117)]['tenant_id']+_0x1f1024(0xfd)+_0x3a87da['config']['schema'][_0x1f1024(0x12e)][_0x1f1024(0x13c)][_0x1f1024(0x126)]+_0x1f1024(0x102)+_0x3a87da['config']['schema'][_0x1f1024(0x12e)][_0x1f1024(0x13c)][_0x1f1024(0x11e)]+_0x1f1024(0x123)+_0x3a87da['config'][_0x1f1024(0x135)][_0x1f1024(0x12e)]['fields'][_0x1f1024(0x124)]+'\x20as\x20tx_servicecharge,\x0a\x09\x09\x09'+_0x3a87da[_0x1f1024(0x117)]['schema'][_0x1f1024(0x12e)][_0x1f1024(0x13c)][_0x1f1024(0x145)]+_0x1f1024(0x138)+_0x3a87da[_0x1f1024(0x117)][_0x1f1024(0x135)][_0x1f1024(0x12e)][_0x1f1024(0x115)]+_0x1f1024(0xfc)+_0x3a87da['config']['schema'][_0x1f1024(0x12e)]['fields'][_0x1f1024(0x126)]+_0x1f1024(0xef)+_0x5e9ff0[_0x1f1024(0xf1)]+_0x1f1024(0x113);try{var _0x384e68=await mssql_query(_0x3a87da,_0xa90d94),_0x494acd=_0x384e68[0x0];return _0x494acd;}catch(_0x3f8815){throw _0x3f8815;}}async function tx_get_data_items(_0x36caf7,_0x3457fd,_0x4a4ca1){var _0x1e59a7=_0x28028b,_0x49d5a9=_0x36caf7['config'][_0x1e59a7(0x135)][_0x1e59a7(0x121)];try{var _0x289b9c;_0x4a4ca1[_0x1e59a7(0x141)]==0x1||_0x4a4ca1[_0x1e59a7(0x141)]==!![]?_0x289b9c='-':_0x289b9c='';var _0x2c2f5b;_0x49d5a9==_0x1e59a7(0x116)?_0x2c2f5b=_0x1e59a7(0x149)+_0x36caf7[_0x1e59a7(0x117)][_0x1e59a7(0x135)][_0x1e59a7(0x12e)][_0x1e59a7(0x13c)][_0x1e59a7(0x112)]+_0x1e59a7(0xf0)+_0x36caf7[_0x1e59a7(0x117)]['schema'][_0x1e59a7(0x12e)][_0x1e59a7(0x13c)][_0x1e59a7(0x112)]+_0x1e59a7(0x108)+_0x289b9c+'('+_0x36caf7['config'][_0x1e59a7(0x135)][_0x1e59a7(0x12e)]['fields'][_0x1e59a7(0x119)]+_0x1e59a7(0xf8)+_0x289b9c+'('+_0x36caf7[_0x1e59a7(0x117)]['schema'][_0x1e59a7(0x12e)]['fields'][_0x1e59a7(0xf9)]+_0x1e59a7(0x10c)+_0x289b9c+'('+_0x36caf7[_0x1e59a7(0x117)][_0x1e59a7(0x135)][_0x1e59a7(0x12e)][_0x1e59a7(0x13c)][_0x1e59a7(0x140)]+_0x1e59a7(0xf7)+_0x36caf7[_0x1e59a7(0x117)]['schema'][_0x1e59a7(0x12e)][_0x1e59a7(0x115)]+_0x1e59a7(0x11f)+_0x36caf7[_0x1e59a7(0x117)][_0x1e59a7(0x135)][_0x1e59a7(0x12e)]['fields'][_0x1e59a7(0x126)]+_0x1e59a7(0xef)+_0x3457fd[_0x1e59a7(0xf1)]+'\x27\x0a\x09\x09\x09':_0x2c2f5b='\x0a\x09\x09\x09\x09SELECT\x20\x0a\x09\x09\x09\x09\x09'+_0x36caf7['config'][_0x1e59a7(0x135)][_0x1e59a7(0xf3)][_0x1e59a7(0x13c)][_0x1e59a7(0x112)]+'\x20as\x20item_id,\x0a\x09\x09\x09\x09\x09'+_0x36caf7[_0x1e59a7(0x117)]['schema']['items'][_0x1e59a7(0x13c)][_0x1e59a7(0x112)]+_0x1e59a7(0x108)+_0x289b9c+'('+_0x36caf7[_0x1e59a7(0x117)][_0x1e59a7(0x135)][_0x1e59a7(0xf3)][_0x1e59a7(0x13c)]['itemqty']+_0x1e59a7(0xf8)+_0x289b9c+'('+_0x36caf7[_0x1e59a7(0x117)][_0x1e59a7(0x135)][_0x1e59a7(0xf3)][_0x1e59a7(0x13c)][_0x1e59a7(0xf9)]+')\x20as\x20item_subtotal,\x0a\x09\x09\x09\x09\x09'+_0x289b9c+'('+_0x36caf7[_0x1e59a7(0x117)][_0x1e59a7(0x135)][_0x1e59a7(0xf3)][_0x1e59a7(0x13c)]['itemtax']+_0x1e59a7(0xf7)+_0x36caf7[_0x1e59a7(0x117)][_0x1e59a7(0x135)][_0x1e59a7(0xf3)]['tablename']+_0x1e59a7(0x11f)+_0x36caf7[_0x1e59a7(0x117)]['schema'][_0x1e59a7(0xf3)][_0x1e59a7(0x13c)][_0x1e59a7(0x126)]+_0x1e59a7(0xef)+_0x3457fd['tx_id']+_0x1e59a7(0x118);var _0x72c170=_0x2c2f5b,_0x15ee6f=await mssql_query(_0x36caf7,_0x72c170);return _0x15ee6f;}catch(_0x1de02b){throw _0x1de02b;}}async function tx_get_data_payments(_0x400d9a,_0x5c764d,_0x4a8b2b){var _0x3e572f=_0x28028b,_0x44e3a1=_0x400d9a[_0x3e572f(0x117)]['schema'][_0x3e572f(0x121)];try{var _0x4a9021;_0x4a8b2b[_0x3e572f(0x141)]==0x1||_0x4a8b2b[_0x3e572f(0x141)]==!![]?_0x4a9021='-':_0x4a9021='';var _0x15ebf0;_0x44e3a1=='schema1'?_0x15ebf0=_0x3e572f(0xff)+_0x4a9021+_0x3e572f(0x100)+_0x400d9a[_0x3e572f(0x117)]['schema']['header'][_0x3e572f(0x13c)]['itemsubtotal']+_0x3e572f(0x105)+_0x400d9a[_0x3e572f(0x117)][_0x3e572f(0x135)][_0x3e572f(0x12e)][_0x3e572f(0x115)]+'\x0a\x09\x09\x09\x09WHERE\x0a\x09\x09\x09\x09\x09'+_0x400d9a[_0x3e572f(0x117)][_0x3e572f(0x135)]['header'][_0x3e572f(0x13c)][_0x3e572f(0x126)]+_0x3e572f(0xef)+_0x5c764d[_0x3e572f(0xf1)]+_0x3e572f(0x11d)+_0x400d9a[_0x3e572f(0x117)][_0x3e572f(0x135)][_0x3e572f(0x12e)][_0x3e572f(0x13c)][_0x3e572f(0x126)]+'\x0a\x09\x09\x09':_0x15ebf0='\x0a\x09\x09\x09\x09SELECT\x0a\x09\x09\x09\x09\x09'+_0x400d9a[_0x3e572f(0x117)][_0x3e572f(0x135)]['payments'][_0x3e572f(0x13c)][_0x3e572f(0x103)]+'\x20as\x20payment_id,\x20\x0a\x09\x09\x09\x09\x09'+_0x400d9a['config']['schema'][_0x3e572f(0x125)][_0x3e572f(0x13c)][_0x3e572f(0x103)]+_0x3e572f(0xf6)+_0x4a9021+'('+_0x400d9a[_0x3e572f(0x117)]['schema']['payments'][_0x3e572f(0x13c)][_0x3e572f(0x11a)]+_0x3e572f(0x148)+_0x400d9a[_0x3e572f(0x117)][_0x3e572f(0x135)][_0x3e572f(0x125)][_0x3e572f(0x115)]+'\x0a\x09\x09\x09\x09WHERE\x0a\x09\x09\x09\x09\x09'+_0x400d9a[_0x3e572f(0x117)]['schema'][_0x3e572f(0x125)]['fields'][_0x3e572f(0x126)]+_0x3e572f(0xef)+_0x5c764d[_0x3e572f(0xf1)]+_0x3e572f(0x118);var _0xad8f5e=_0x15ebf0,_0x4e254c=await mssql_query(_0x400d9a,_0xad8f5e);return _0x4e254c;}catch(_0x214001){throw _0x214001;}}async function previewtable(_0x1b442a,_0x2c649e){var _0x73b0a3=_0x28028b;try{var _0xbbc361=[];for(var _0x573a68 in _0x2c649e[_0x73b0a3(0x13c)]){_0xbbc361[_0x73b0a3(0xf4)](_0x2c649e[_0x73b0a3(0x13c)][_0x573a68]+_0x73b0a3(0xfe)+_0x573a68);}var _0x5cb61a=_0xbbc361[_0x73b0a3(0x139)](',\x20'),_0x41e273=_0x73b0a3(0x12d)+_0x2c649e['limit']+'\x0a\x09\x09\x09'+_0x5cb61a+'\x0a\x09\x09\x09FROM\x0a\x09\x09\x09'+_0x2c649e[_0x73b0a3(0x115)]+'\x0a\x09\x09\x09\x0a\x09\x09',_0x4127e8=await mssql_query(_0x1b442a,_0x41e273,[]);return _0x4127e8;}catch(_0x7f3f1e){throw _0x7f3f1e;}}