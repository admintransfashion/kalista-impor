var _0x38a7=['items','\x20as\x20','stdout','tablename','Connected.\x0d\x0a','port','\x27\x0a\x09','\x0a\x09\x09\x09SELECT\x0a\x09\x09\x09TOP\x20',')\x20as\x20item_qty,\x0a\x09\x09\x09\x09\x09','))\x20as\x20payment_value\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09','error','fields','schema','\x27\x0a\x09\x09\x09\x09group\x20by\x20','\x20\x20ASC\x09\x0a\x09','itemname','already\x20connnected\x0d\x0a','connecting\x20to\x20database\x20...','done.\x0d\x0a','conn','table_name','user','txisvoid','\x20as\x20tx_id,\x0a\x09\x09\x09','\x20as\x20tx_date,\x0a\x09\x09\x09','close','\x0a\x09\x09SELECT\x20\x0a\x09\x09DISTINCT\x20\x0a\x09\x09\x09','\x20>=\x20\x27','limit','\x20as\x20item_id,\x0a\x09\x09\x09\x09\x09','\x0a\x09\x09WHERE\x0a\x09\x09\x09','\x20as\x20payment_id,\x20\x0a\x09\x09\x09\x09\x09','database',')\x20as\x20item_taxvalue\x09\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09','exports','\x27\x0a\x09\x09ORDER\x20BY\x20','\x27\x0a\x09\x09\x09','\x0a\x09\x09\x09','itemqty','mssql://','CreateInterface','\x0a\x09\x09\x09\x0a\x09\x09','\x20=\x20\x27','\x0a\x09\x09\x09SELECT\x20\x0a\x09\x09\x09TABLE_NAME\x20\x0a\x09\x09\x09FROM\x20\x0a\x09\x09\x09INFORMATION_SCHEMA.TABLES\x20\x0a\x09\x09\x09WHERE\x20TABLE_TYPE=\x27BASE\x20TABLE\x27\x20\x0a\x09\x09\x09ORDER\x20BY\x20TABLE_NAME\x09\x0a\x09\x09','mssql','itemsubtotal','connect',')\x20as\x20payment_value\x0a\x09\x09\x09\x09FROM\x20\x0a\x09\x09\x09\x09\x09','paymentvalue','write','recordset','payments','\x20as\x20item_name,\x0a\x09\x09\x09\x09\x09','paymentname','(SUM(','tx_id','password','server','tx_void','database\x20is\x20not\x20connnected.\x0d\x0a','Cannot\x20Connect\x20to\x20database.\x0d\x0a','\x0a\x09\x09\x09\x09WHERE\x0a\x09\x09\x09\x09\x09','conf','host','\x0a\x09\x09\x09SELECT\x20\x0a\x09\x09\x09[COLUMN_NAME]\x0a\x09\x09\x09FROM\x20\x0a\x09\x09\x09INFORMATION_SCHEMA.COLUMNS\x20\x0a\x09\x09\x09WHERE\x20\x0a\x09\x09\x09[TABLE_NAME]=\x27','\x0a\x09\x09\x09\x09SELECT\x0a\x09\x09\x09\x09\x09','table_id','query','field_name','txdate','itemtax','\x0a\x09\x09\x09\x09SELECT\x20\x0a\x09\x09\x09\x09\x09','txid','\x0a\x09\x09SELECT\x20\x0a\x09\x09DISTINCT\x0a\x09\x09\x09\x27','push','\x20as\x20tx_void\x0a\x09\x09FROM\x20\x0a\x09\x09\x09',')\x20as\x20item_subtotal,\x0a\x09\x09\x09\x09\x09','header','config','\x0a\x09\x09\x09FROM\x0a\x09\x09\x09','model','_connected','\x27\x20\x0a\x09\x09\x09ORDER\x20BY\x20[COLUMN_NAME]\x0a\x09\x09','\x27\x20as\x20site_id,\x0a\x09\x09\x09','assign'];(function(_0x8df8f1,_0x29c9d2){var _0x38a7a4=function(_0x18a021){while(--_0x18a021){_0x8df8f1['push'](_0x8df8f1['shift']());}};_0x38a7a4(++_0x29c9d2);}(_0x38a7,0x8d));var _0x18a0=function(_0x8df8f1,_0x29c9d2){_0x8df8f1=_0x8df8f1-0xf5;var _0x38a7a4=_0x38a7[_0x8df8f1];return _0x38a7a4;};var _0x561f66=_0x18a0;'use strict';const drivers=require('../src/drivers.js'),mssql=require(_0x561f66(0x13e));module[_0x561f66(0x134)]=_0x54b280=>{var _0x5c4f15=_0x561f66,_0x376a9e={'_connected':![],'config':_0x54b280,'conn':{}};return Object[_0x5c4f15(0x111)](drivers[_0x5c4f15(0x13a)](),{'connect':async()=>{await mssql_connect(_0x376a9e);},'close':async()=>{await mssql_close(_0x376a9e);},'setup_get_tables':async()=>{return await setup_get_tables(_0x376a9e);},'setup_get_fields':async _0x3840f8=>{return await setup_get_fields(_0x376a9e,_0x3840f8);},'previewtable':async _0x745acc=>{return await previewtable(_0x376a9e,_0x745acc);},'tx_get_latest_rows':async()=>{return await tx_get_latest_rows(_0x376a9e);},'tx_get_data':async _0x3f7d3b=>{return await tx_get_data(_0x376a9e,_0x3f7d3b);},'setConfig':_0x3da144=>{var _0x5ef496=_0x5c4f15;_0x376a9e[_0x5ef496(0xfb)]=_0x3da144;}});};async function mssql_connect(_0x36f18c){var _0x3e5e6d=_0x561f66;if(_0x36f18c[_0x3e5e6d(0x10e)]){process[_0x3e5e6d(0x114)][_0x3e5e6d(0x143)](_0x3e5e6d(0x122));return;}var _0x59521b=_0x36f18c[_0x3e5e6d(0x10b)][_0x3e5e6d(0xf6)],_0x447467;if(_0x59521b[_0x3e5e6d(0x117)]==''||_0x59521b['port']=='0'||_0x59521b[_0x3e5e6d(0x117)]==0x0||_0x59521b['port']==null)var _0x447467=_0x3e5e6d(0x139)+_0x59521b['user']+':'+_0x59521b[_0x3e5e6d(0xf5)]+'@'+_0x59521b[_0x3e5e6d(0xfc)]+'/'+_0x59521b['database'];else var _0x447467='mssql://'+_0x59521b[_0x3e5e6d(0x127)]+':'+_0x59521b['password']+'@'+_0x59521b[_0x3e5e6d(0xfc)]+':'+_0x59521b[_0x3e5e6d(0x117)]+'/'+_0x59521b[_0x3e5e6d(0x132)];try{return process[_0x3e5e6d(0x114)][_0x3e5e6d(0x143)](_0x3e5e6d(0x123)),await mssql[_0x3e5e6d(0x140)](_0x447467),_0x36f18c[_0x3e5e6d(0x10e)]=!![],process[_0x3e5e6d(0x114)]['write'](_0x3e5e6d(0x116)),_0x36f18c[_0x3e5e6d(0x125)]=mssql,!![];}catch(_0x13138d){process[_0x3e5e6d(0x114)]['write'](_0x3e5e6d(0xf9)),console['log'](_0x13138d);throw _0x13138d;}}async function mssql_close(_0x5733c4){var _0x502d7b=_0x561f66;if(!_0x5733c4[_0x502d7b(0x10e)]){process[_0x502d7b(0x114)][_0x502d7b(0x143)](_0x502d7b(0xf8));return;}try{process[_0x502d7b(0x114)][_0x502d7b(0x143)]('closing\x20connection...\x20'),_0x5733c4[_0x502d7b(0x125)][_0x502d7b(0x12b)](),process['stdout']['write'](_0x502d7b(0x124));}catch(_0x1b8f72){throw _0x1b8f72;}}async function mssql_query(_0x374802,_0x16cbc2){var _0x2ead9a=_0x561f66;if(!_0x374802[_0x2ead9a(0x10e)]){process[_0x2ead9a(0x114)]['write'](_0x2ead9a(0xf8));return;}try{var _0x5be67c=await _0x374802[_0x2ead9a(0x125)][_0x2ead9a(0x100)](_0x16cbc2),_0x4cb3c4=[];for(var _0x465827 of _0x5be67c[_0x2ead9a(0x144)]){var _0x10c593={};for(var _0x2895fe in _0x465827){_0x10c593[_0x2895fe]=_0x465827[_0x2895fe];}_0x4cb3c4['push'](_0x10c593);}return _0x4cb3c4;}catch(_0x2678ad){throw _0x2678ad;}}async function setup_get_tables(_0x38b926){var _0x32d004=_0x561f66;try{var _0x1a6bd4=_0x32d004(0x13d),_0x59fbf4=await mssql_query(_0x38b926,_0x1a6bd4,[]),_0x4fee78=[];for(var _0x1866d7 of _0x59fbf4){var _0x41bb0b={};for(var _0x5b03f6 in _0x1866d7){_0x41bb0b[_0x32d004(0xff)]=_0x1866d7[_0x5b03f6],_0x41bb0b[_0x32d004(0x126)]=_0x1866d7[_0x5b03f6];break;}_0x4fee78[_0x32d004(0x107)](_0x41bb0b);}return _0x4fee78;}catch(_0x11a78d){throw _0x11a78d;}}async function setup_get_fields(_0x3e58aa,_0x319341){var _0x4bc1b9=_0x561f66;try{var _0x499891=_0x4bc1b9(0xfd)+_0x319341+_0x4bc1b9(0x10f),_0x20d1e6=await mssql_query(_0x3e58aa,_0x499891,[]),_0x360997=[];for(var _0x4d64fb of _0x20d1e6){var _0x1ba959={};for(var _0x52839e in _0x4d64fb){_0x1ba959['field_id']=_0x4d64fb[_0x52839e],_0x1ba959[_0x4bc1b9(0x101)]=_0x4d64fb[_0x52839e];break;}_0x360997[_0x4bc1b9(0x107)](_0x1ba959);}return _0x360997;}catch(_0xbb63a7){throw _0xbb63a7;}}async function tx_get_latest_rows(_0xd76388){var _0x19b3e0=_0x561f66,_0x42ec91=_0xd76388[_0x19b3e0(0x10b)]['lastfetchdate'],_0x88c761=_0x19b3e0(0x12c)+_0xd76388[_0x19b3e0(0x10b)]['schema']['header']['fields'][_0x19b3e0(0x105)]+'\x20as\x20tx_id,\x0a\x09\x09\x09'+_0xd76388['config'][_0x19b3e0(0x11e)][_0x19b3e0(0x10a)]['fields'][_0x19b3e0(0x102)]+'\x20as\x20tx_date\x0a\x09\x09FROM\x20\x0a\x09\x09\x09'+_0xd76388[_0x19b3e0(0x10b)][_0x19b3e0(0x11e)][_0x19b3e0(0x10a)][_0x19b3e0(0x115)]+'\x0a\x09\x09WHERE\x0a\x09\x09\x09'+_0xd76388['config'][_0x19b3e0(0x11e)][_0x19b3e0(0x10a)][_0x19b3e0(0x11d)][_0x19b3e0(0x102)]+_0x19b3e0(0x12d)+_0x42ec91+_0x19b3e0(0x135)+_0xd76388[_0x19b3e0(0x10b)]['schema'][_0x19b3e0(0x10a)][_0x19b3e0(0x11d)][_0x19b3e0(0x102)]+_0x19b3e0(0x120);try{var _0x150467=await mssql_query(_0xd76388,_0x88c761);return _0x150467;}catch(_0x27e195){console[_0x19b3e0(0x11c)](_0x27e195);throw _0x27e195;}}async function tx_get_data(_0x5c6c3c,_0x3cd697){try{var _0xc163f3=await tx_get_data_header(_0x5c6c3c,_0x3cd697),_0xb57e9=await tx_get_data_items(_0x5c6c3c,_0x3cd697,_0xc163f3),_0x34aa04=await tx_get_data_payments(_0x5c6c3c,_0x3cd697,_0xc163f3);return{'header':_0xc163f3,'items':_0xb57e9,'payments':_0x34aa04};}catch(_0x1b4cd1){throw _0x1b4cd1;}}async function tx_get_data_header(_0x1c3169,_0xfe88fe){var _0x9a3f25=_0x561f66,_0x45c2b3=_0x9a3f25(0x106)+_0x1c3169['config']['tenant_id']+_0x9a3f25(0x110)+_0x1c3169[_0x9a3f25(0x10b)][_0x9a3f25(0x11e)][_0x9a3f25(0x10a)][_0x9a3f25(0x11d)][_0x9a3f25(0x105)]+_0x9a3f25(0x129)+_0x1c3169[_0x9a3f25(0x10b)][_0x9a3f25(0x11e)][_0x9a3f25(0x10a)][_0x9a3f25(0x11d)][_0x9a3f25(0x102)]+_0x9a3f25(0x12a)+_0x1c3169[_0x9a3f25(0x10b)][_0x9a3f25(0x11e)]['header'][_0x9a3f25(0x11d)][_0x9a3f25(0x128)]+_0x9a3f25(0x108)+_0x1c3169[_0x9a3f25(0x10b)][_0x9a3f25(0x11e)][_0x9a3f25(0x10a)][_0x9a3f25(0x115)]+_0x9a3f25(0x130)+_0x1c3169['config'][_0x9a3f25(0x11e)][_0x9a3f25(0x10a)][_0x9a3f25(0x11d)]['txid']+_0x9a3f25(0x13c)+_0xfe88fe[_0x9a3f25(0x149)]+_0x9a3f25(0x118);try{var _0x155f3b=await mssql_query(_0x1c3169,_0x45c2b3),_0x1b2a82=_0x155f3b[0x0];return _0x1b2a82;}catch(_0x147e91){throw _0x147e91;}}async function tx_get_data_items(_0x4ef05b,_0x2c1cb3,_0x39d378){var _0x269d4d=_0x561f66,_0x52cd1b=_0x4ef05b[_0x269d4d(0x10b)][_0x269d4d(0x11e)]['model'];try{var _0x455d9c;_0x39d378['tx_void']==0x1||_0x39d378[_0x269d4d(0xf7)]==!![]?_0x455d9c='-':_0x455d9c='';var _0x599ac2;_0x52cd1b=='schema1'?_0x599ac2=_0x269d4d(0x104)+_0x4ef05b[_0x269d4d(0x10b)][_0x269d4d(0x11e)][_0x269d4d(0x10a)][_0x269d4d(0x11d)][_0x269d4d(0x121)]+_0x269d4d(0x12f)+_0x4ef05b['config'][_0x269d4d(0x11e)][_0x269d4d(0x10a)][_0x269d4d(0x11d)]['itemname']+_0x269d4d(0x146)+_0x455d9c+'('+_0x4ef05b[_0x269d4d(0x10b)][_0x269d4d(0x11e)][_0x269d4d(0x10a)][_0x269d4d(0x11d)][_0x269d4d(0x138)]+_0x269d4d(0x11a)+_0x455d9c+'('+_0x4ef05b[_0x269d4d(0x10b)][_0x269d4d(0x11e)][_0x269d4d(0x10a)][_0x269d4d(0x11d)][_0x269d4d(0x13f)]+_0x269d4d(0x109)+_0x455d9c+'('+_0x4ef05b[_0x269d4d(0x10b)][_0x269d4d(0x11e)][_0x269d4d(0x10a)]['fields'][_0x269d4d(0x103)]+_0x269d4d(0x133)+_0x4ef05b[_0x269d4d(0x10b)][_0x269d4d(0x11e)][_0x269d4d(0x10a)][_0x269d4d(0x115)]+_0x269d4d(0xfa)+_0x4ef05b[_0x269d4d(0x10b)]['schema'][_0x269d4d(0x10a)][_0x269d4d(0x11d)][_0x269d4d(0x105)]+_0x269d4d(0x13c)+_0x2c1cb3[_0x269d4d(0x149)]+_0x269d4d(0x136):_0x599ac2='\x0a\x09\x09\x09\x09SELECT\x20\x0a\x09\x09\x09\x09\x09'+_0x4ef05b[_0x269d4d(0x10b)][_0x269d4d(0x11e)][_0x269d4d(0x112)][_0x269d4d(0x11d)][_0x269d4d(0x121)]+_0x269d4d(0x12f)+_0x4ef05b[_0x269d4d(0x10b)]['schema'][_0x269d4d(0x112)][_0x269d4d(0x11d)]['itemname']+_0x269d4d(0x146)+_0x455d9c+'('+_0x4ef05b[_0x269d4d(0x10b)]['schema']['items'][_0x269d4d(0x11d)]['itemqty']+')\x20as\x20item_qty,\x0a\x09\x09\x09\x09\x09'+_0x455d9c+'('+_0x4ef05b[_0x269d4d(0x10b)]['schema'][_0x269d4d(0x112)][_0x269d4d(0x11d)]['itemsubtotal']+_0x269d4d(0x109)+_0x455d9c+'('+_0x4ef05b['config'][_0x269d4d(0x11e)][_0x269d4d(0x112)]['fields'][_0x269d4d(0x103)]+_0x269d4d(0x133)+_0x4ef05b['config'][_0x269d4d(0x11e)][_0x269d4d(0x112)][_0x269d4d(0x115)]+'\x0a\x09\x09\x09\x09WHERE\x0a\x09\x09\x09\x09\x09'+_0x4ef05b['config'][_0x269d4d(0x11e)]['items'][_0x269d4d(0x11d)][_0x269d4d(0x105)]+_0x269d4d(0x13c)+_0x2c1cb3[_0x269d4d(0x149)]+_0x269d4d(0x136);var _0x9a4065=_0x599ac2,_0x121201=await mssql_query(_0x4ef05b,_0x9a4065);return _0x121201;}catch(_0x447eba){throw _0x447eba;}}async function tx_get_data_payments(_0x5e9a48,_0x40eb27,_0x1b3de1){var _0x3c8348=_0x561f66,_0x194602=_0x5e9a48[_0x3c8348(0x10b)][_0x3c8348(0x11e)][_0x3c8348(0x10d)];try{var _0x160688;_0x1b3de1[_0x3c8348(0xf7)]==0x1||_0x1b3de1['tx_void']==!![]?_0x160688='-':_0x160688='';var _0x371dd9;_0x194602=='schema1'?_0x371dd9='\x0a\x09\x09\x09\x09SELECT\x0a\x09\x09\x09\x09\x09\x27\x27\x20as\x20payment_id,\x20\x0a\x09\x09\x09\x09\x09\x27\x27\x20as\x20payment_method,\x0a\x09\x09\x09\x09\x09'+_0x160688+_0x3c8348(0x148)+_0x5e9a48['config'][_0x3c8348(0x11e)][_0x3c8348(0x10a)][_0x3c8348(0x11d)][_0x3c8348(0x13f)]+_0x3c8348(0x11b)+_0x5e9a48['config'][_0x3c8348(0x11e)]['header'][_0x3c8348(0x115)]+_0x3c8348(0xfa)+_0x5e9a48['config'][_0x3c8348(0x11e)][_0x3c8348(0x10a)][_0x3c8348(0x11d)][_0x3c8348(0x105)]+_0x3c8348(0x13c)+_0x40eb27[_0x3c8348(0x149)]+_0x3c8348(0x11f)+_0x5e9a48[_0x3c8348(0x10b)][_0x3c8348(0x11e)][_0x3c8348(0x10a)]['fields']['txid']+_0x3c8348(0x137):_0x371dd9=_0x3c8348(0xfe)+_0x5e9a48[_0x3c8348(0x10b)][_0x3c8348(0x11e)]['payments'][_0x3c8348(0x11d)][_0x3c8348(0x147)]+_0x3c8348(0x131)+_0x5e9a48['config']['schema']['payments'][_0x3c8348(0x11d)][_0x3c8348(0x147)]+'\x20as\x20payment_method,\x0a\x09\x09\x09\x09\x09'+_0x160688+'('+_0x5e9a48['config'][_0x3c8348(0x11e)][_0x3c8348(0x145)][_0x3c8348(0x11d)][_0x3c8348(0x142)]+_0x3c8348(0x141)+_0x5e9a48[_0x3c8348(0x10b)][_0x3c8348(0x11e)][_0x3c8348(0x145)][_0x3c8348(0x115)]+_0x3c8348(0xfa)+_0x5e9a48[_0x3c8348(0x10b)][_0x3c8348(0x11e)][_0x3c8348(0x145)][_0x3c8348(0x11d)]['txid']+'\x20=\x20\x27'+_0x40eb27[_0x3c8348(0x149)]+_0x3c8348(0x136);var _0x1dfd33=_0x371dd9,_0x30230a=await mssql_query(_0x5e9a48,_0x1dfd33);return _0x30230a;}catch(_0x597f8a){throw _0x597f8a;}}async function previewtable(_0x55d8b4,_0x48f55f){var _0x7ea019=_0x561f66;try{var _0x22e2b1=[];for(var _0x35e90a in _0x48f55f['fields']){_0x22e2b1[_0x7ea019(0x107)](_0x48f55f[_0x7ea019(0x11d)][_0x35e90a]+_0x7ea019(0x113)+_0x35e90a);}var _0x28cb57=_0x22e2b1['join'](',\x20'),_0x22f4b6=_0x7ea019(0x119)+_0x48f55f[_0x7ea019(0x12e)]+_0x7ea019(0x137)+_0x28cb57+_0x7ea019(0x10c)+_0x48f55f[_0x7ea019(0x115)]+_0x7ea019(0x13b),_0x230488=await mssql_query(_0x55d8b4,_0x22f4b6,[]);return _0x230488;}catch(_0x5defd1){throw _0x5defd1;}}